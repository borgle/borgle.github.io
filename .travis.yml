
sudo: false

language: python
python:
  - "2.7"

install:
  - pip install -r requirements.txt

script: 
  - pelican -s publishconf.py

after_success:
  - export COMMIT_MSG=$(git log -1 --oneline --format="%s")
  - cd public
  - git config --global user.email "Yoker.Wu@gmail.com"
  - git config --global user.name "Yoker.Wu"
  - git add --all
  - git commit -a -m "$COMMIT_MSG"
  - git push -q https://yoker:${GITHUB_API_KEY}@github.com/yoker/gkeeps.com.git HEAD:gh-pages

branches:
  only:
    - master